<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Budget Tracker</title>
<link rel="stylesheet" href="/css/transaction_view.css">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7"
	crossorigin="anonymous">
<script type="text/javascript"
	src="https://www.gstatic.com/charts/loader.js"></script>
</head>
<body>
	<div id="header">
		<h1>Budget Tracker</h1>
	</div>
	<nav class="navbar navbar-expand-lg bg-body-tertiary"
		id="navigationBar">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">Menu</a>
			<button class="navbar-toggler" type="button"
				data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
				aria-controls="navbarSupportedContent" aria-expanded="false"
				aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarSupportedContent">
				<ul class="navbar-nav me-auto mb-2 mb-lg-0">
					<li class="nav-item"><a class="nav-link"
						th:href="@{/get-budget/{id}(id=${profile.id})}">Dashboard</a></li>
					</li>
					<li class="nav-item dropdown"><a
						class="nav-link dropdown-toggle" href="#" role="button"
						data-bs-toggle="dropdown" aria-expanded="false"> Profile </a>
						<ul class="dropdown-menu">
							<li><a class="dropdown-item"
								th:href="@{/edit-profile/{id}(id=${profile.id})}">Edit
									profile</a></li>
							<li><a class="dropdown-item"
								th:href="@{/delete-profile/{id}(id=${profile.id})}"
								onclick="return confirm('Are you sure you want to delete this profile ?')">Delete
									profile</a></li>
						</ul></li>
				</ul>
				<form class="d-flex" th:action="@{/}">
					<button class="btn" type="submit"
						style="background-color: #2a68f7; color: white">
						<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
							fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16">
				  <path
								d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z" />
				  <path
								d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z" />
				</svg>
						Home
					</button>
				</form>
			</div>
		</div>
	</nav>
	<div id="mainDiv">
		<div id="headingDiv">
			<h3 th:text="'Transactions for '+${month}+' '+${year}"></h3>
		</div>
		<div id="downloadButtonDiv">
			<button class="btn"
				th:onclick="'window.location.href=\'' + @{/download-all-transactions(idValue=${profile.id}, monthName=${month}, yearValue=${year} )} + '\''">
				<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
					fill="currentColor" class="bi bi-file-earmark-arrow-down-fill"
					viewBox="0 0 16 16">
				  <path
						d="M9.293 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.707A1 1 0 0 0 13.707 4L10 .293A1 1 0 0 0 9.293 0M9.5 3.5v-2l3 3h-2a1 1 0 0 1-1-1m-1 4v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L7.5 11.293V7.5a.5.5 0 0 1 1 0" />
				</svg>
				download
			</button>
		</div>
		<div id="tableDiv">
			<table class="table">
				<thead>
					<tr>
						<th scope="col">Date</th>
						<th scope="col">Category</th>
						<th scope="col">Expense Type</th>
						<th scope="col">Amount</th>
						<th scope="col">Description</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="transaction:${transactions}">
						<td th:text="${transaction.date}"></td>
						<td th:if="${transaction.category}=='Expense'" class="text-danger">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
								fill="currentColor" class="bi bi-caret-down-fill"
								viewBox="0 0 16 16">
						  <path
									d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" />
						</svg> <span th:text="${transaction.category}"></span>
						</td>
						<td th:if="${transaction.category}=='Income'" class="text-success">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
								fill="currentColor" class="bi bi-caret-up-fill"
								viewBox="0 0 16 16">
						  <path
									d="m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z" />
						</svg> <span th:text="${transaction.category}"></span>
						</td>
						<td th:text="${transaction.expenseType}"></td>
						<td th:text="${transaction.amount}"></td>
						<td th:text="${transaction.description}"></td>
					</tr>
				</tbody>
			</table>
		</div>
		<div id="paginationDiv">
			<div>
				<nav aria-label="Page navigation example">
					<ul class="pagination">
						<li class="page-item"
							th:classappend="${currentPage==0}?'disabled'"><a
							class="page-link"
							th:href="@{/view-all-transactions(idValue=${profile.id}, monthName=${month}, yearValue=${year}, page=${currentPage-1})}">Previous</a>
						</li>
						<li class="page-item"
							th:each="i:${#numbers.sequence(0,totalPages-1)}"
							th:classappend="${i==currentPage}?'active'"><a
							class="page-link"
							th:href="@{/view-all-transactions(idValue=${profile.id}, monthName=${month}, yearValue=${year}, page=${i})}"
							th:text="${i+1}">1</a></li>
						<li class="page-item"
							th:classappend="${currentPage+1==totalPages}?'disabled'"><a
							class="page-link"
							th:href="@{/view-all-transactions(idValue=${profile.id}, monthName=${month}, yearValue=${year}, page=${currentPage+1})}">Next</a>
						</li>
					</ul>
				</nav>
			</div>
		</div>
	</div>
	<div id="footer"></div>
	<script id="data" type="application/json" th:inline="javascript">
	</script>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
		crossorigin="anonymous"></script>
	<script src="/js/dashboard.js"></script>
</body>
</html>